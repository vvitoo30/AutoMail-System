<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automail system</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #BFD8AF;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Poppins', sans-serif; /* Change font to Poppins */
        }

        .card {
            backdrop-filter: blur(10px);
            background-color: #D4E7C5;
            max-width: 700px;
            width: 100%;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-family: 'Poppins', sans-serif; /* Change font to Poppins */
            margin-top: auto;
        }
        /* Apply Times New Roman font to input fields and textarea */
        input[type="text"],
        textarea {
            font-family: 'Poppins', sans-serif; /* Change font to Poppins */
            padding: 10px; /* Add padding */
            font-size: 20px; /* Increase font size */
            width: 100%;
            height: 60px; /* Make input fields and textareas 100% width */
            box-sizing: border-box; /* Include padding and border in the width */
            border-radius: 10px;
            background-color: #F7FFF3;
            border: none; /* Add this line to remove the border */
        }
        /* Increase height of textareas */
        textarea {
            height: 150px;
        }
        /* Add margin-bottom to form-floating elements */
        .form-floating.mb-3 {
            margin-bottom: 20px;
        }

        #submitBtn {
            padding: 20px 40px; /* Adjust padding to increase button size */
            font-size: 20px; /* Increase font size */
            border: none; /* Remove border */
            border-radius: 10px; /* Make corners rounded */
        }
        #clearBtn {
            padding: 20px 40px; /* Adjust padding to increase button size */
            font-size: 20px; /* Increase font size */
            border: none; /* Remove border */
            border-radius: 10px; /* Make corners rounded */
        }
        #clearBtn:enabled {
            background-color: #d65858; /* Change background color */
        }
        #clearBtn:disabled{
            background-color: #E1F0DA;
        }
        /* Add text-align: center to align the button to the center */
        .d-grid {
            text-align: center;
        }
        /* Change button color when enabled */
        #submitBtn:enabled {
            background-color: #99BC85; /* Change background color */
        }
        #submitBtn:disabled{
            background-color: #E1F0DA;
        }

        /* Style for the custom file input button */
        .custom-file-input {
            position: relative;
            display: inline-block;
        }

        .custom-file-input input[type="file"] {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .custom-file-input button {
            padding: 10px 20px;
            font-size: 20px;
            background-color: #99BC85;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        .custom-file-input button:hover {
            background-color: #7FA96A;
        }

    </style>
</head>
<body>
<div class="card p-4 shadow-sm">
    <h2 class="mb-4 text-center" style="font-size: 35px; text-align: center;">Masukkan Data Surat Anda</h2>
    
    <form onsubmit="handleSubmit(event)">
        <p class="mb-4" style="font-size: 20px; text-align: left; padding-left: 5px;">Kop surat</p>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="judul_Surat" name="judul_Surat" placeholder="Judul Surat" required oninput="enableSubmit();">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="asal_surat" name="asal surat" placeholder="Asal Instansi" required oninput="enableSubmit();">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="alamat_surat" name="alamat_surat" placeholder="Alamat Instansi" required oninput="enableSubmit();">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="email_website" name="email_website" placeholder="Email/Website Instansi" required oninput="enableSubmit();">
        </div>
        <p class="mb-4" style="font-size: 20px; text-align: left; padding-left: 5px;">Isi surat</p>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nomor" name="nomor" placeholder="Nomor Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="klasifikasi" name="klasifikasi" placeholder="Klasifikasi Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="lampiran" name="lampiran" placeholder="Lampiran Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="tempat_tanggal" name="tempat_tanggal" placeholder="Tempat, Tanggal Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="perihal" name="perihal" placeholder="Perihal Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating">
            <textarea type="text" class="form-control" id="kepada" name="kepada" placeholder="Kepada YTH" required oninput="enableSubmit()" aria-describedby="Desc"></textarea>
        </div>
        <div id="desc" class="form-text" style="margin-bottom: 20px;">
            jika lebih dari 1 subjek, maka silahkan enter saja (jangan menambahkan angka 1. abc, 2.)
        </div>
        <div class="form-floating mb-3">
            <textarea class="form-control" id="isi_surat" name="isi_surat" placeholder="Isi Surat" required oninput="enableSubmit()"></textarea>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="jabatan_penandatangan" name="jabatan_penandatangan" placeholder="Jabatan Penandatangan Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="penandatangan" name="penandandatangan" placeholder="Penandatangan Surat" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nip" name="nip" placeholder="NIP Penandatangan" required oninput="enableSubmit()">
        </div>
        <div class="form-floating mb-3 custom-file-input">
            <input type="file" class="form-control" id="image" name="image" accept="image/*" onchange="previewImage();" aria-describedby="desc">
            <button type="button" onclick="document.getElementById('image').click();">Upload Image</button>
            <div id="desc" class="form-text" style="margin-top: 10px;">
                Gambar TTD Scan (Optional)
            </div>
        </div>    
        <div class="form-floating mb-3 custom-file-input">
            <input type="file" class="form-control" id="logo" name="logo" accept="image/*" onchange="previewLogo();" aria-describedby="logoDesc">
            <button type="button" onclick="document.getElementById('logo').click();">Upload Logo</button>
            <div id="logoDesc" class="form-text" style="margin-top: 10px;">
                Logo Perusahaan (Optional)
            </div>
        </div>
            
        <div class="d-grid">
            <button id="submitBtn" type="submit" class="btn btn-primary btn-lg" disabled>Submit</button>
            <button id="clearBtn" class="btn btn-danger btn-lg" onclick="clearInputs()">Clear Inputs</button>
        </div>

        <!-- Move this section to the bottom of the form -->
        <div class="form-floating mt-3 custom-file-input" style="padding-top: 30px;">
            <a href="merge.html"><button type="button" class="btn btn-primary" style="text-align: center;">Fitur Gabungkan Pdf</button></a>
        </div> 

    </form>
</div>
<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function clearInputs() {
        // Get all input elements
        const inputElements = document.querySelectorAll('input[type="text"], textarea');
    
        // Loop through each input element and clear its value
        inputElements.forEach(input => {
            input.value = '';
        });
    
        // Clear image input value
        const imageInput = document.getElementById('image');
        imageInput.value = '';
    
        // Clear signature image preview
        const signatureImage = document.getElementById('signatureImage');
        if (signatureImage) {
            signatureImage.src = '';
            signatureImage.style.display = 'none';
        }
    
        // Clear logo image preview (if applicable)
        const logoImage = document.getElementById('logoImage');
        if (logoImage) {
            logoImage.src = '';
            logoImage.style.display = 'none';
        }
    
        // Disable submit button after clearing inputs
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.disabled = true;
    }
    
    
</script>
<script>
    function handleSubmit(event) {
        event.preventDefault();

        // Get values from input fields
        const judulSurat = document.getElementById('judul_Surat').value;
        const asal_surat = document.getElementById('asal_surat').value;
        const alamat_surat= document.getElementById('alamat_surat').value;
        const email_website = document.getElementById('email_website').value;
        const nomor = document.getElementById('nomor').value;
        const klasifikasi = document.getElementById('klasifikasi').value;
        const lampiran = document.getElementById('lampiran').value;
        const perihal = document.getElementById('perihal').value;
        const tempatTanggal = document.getElementById('tempat_tanggal').value;
        const kepada = document.getElementById('kepada').value;
        const isiSurat = document.getElementById('isi_surat').value;
        const jabatan_penandatangan = document.getElementById('jabatan_penandatangan').value;
        const penandatangan = document.getElementById('penandatangan').value;
        const nip = document.getElementById('nip').value;

        // Store values in localStorage
        localStorage.setItem('judul_Surat', judulSurat);
        localStorage.setItem('asal_surat', asal_surat);
        localStorage.setItem('alamat_surat', alamat_surat);
        localStorage.setItem('email_website', email_website);
        localStorage.setItem('nomor', nomor);
        localStorage.setItem('klasifikasi', klasifikasi);
        localStorage.setItem('lampiran', lampiran);
        localStorage.setItem('perihal', perihal);
        localStorage.setItem('tempat_tanggal', tempatTanggal);
        localStorage.setItem('kepada', kepada);
        localStorage.setItem('isi_surat', isiSurat);
        localStorage.setItem('penandatangan', penandatangan);
        localStorage.setItem('jabatan_penandatangan', jabatan_penandatangan);
        localStorage.setItem('nip', nip);

        // Handle image file
        const image = document.getElementById('image').files[0];
        if (image) {
            const reader = new FileReader();
            reader.onloadend = function() {
                localStorage.setItem('image', reader.result);
                // Redirect after image is saved
                window.location.href = 'hasil.html';
            };
            reader.readAsDataURL(image);
        } else {
            // Redirect if no image
            window.location.href = 'hasil.html';
        }
    }

    // Function to enable submit button when all required fields are filled
    function enableSubmit() {
        const judulSurat = document.getElementById('judul_Surat').value;
        const nomor = document.getElementById('nomor').value;
        const klasifikasi = document.getElementById('klasifikasi').value;
        const lampiran = document.getElementById('lampiran').value;
        const perihal = document.getElementById('perihal').value;
        const tempatTanggal = document.getElementById('tempat_tanggal').value;
        const kepada = document.getElementById('kepada').value;
            const isiSurat = document.getElementById('isi_surat').value;
        const jabatan_penandatangan = document.getElementById('jabatan_penandatangan').value;
        const penandatangan = document.getElementById('penandatangan').value;
        const nip = document.getElementById('nip').value;

        const submitBtn = document.getElementById('submitBtn');

        if (judulSurat && nomor && klasifikasi && lampiran && perihal && tempatTanggal && kepada && isiSurat && jabatan_penandatangan && penandatangan && nip) {
            submitBtn.disabled = false;
        } else {
            submitBtn.disabled = true;
        }
    }

    function previewImage() {
        const file = document.getElementById('image').files[0];
        const reader = new FileReader();
        
        reader.onloadend = function() {
            // Save the image as a base64 string in localStorage
            localStorage.setItem('image', reader.result);
            
            // Display the image preview (optional)
            const signatureImage = document.getElementById('signatureImage');
            if (signatureImage) {
                signatureImage.src = reader.result;
                signatureImage.style.display = 'block';
            }
        };

        if (file) {
            reader.readAsDataURL(file);
        }
    }
</script>

<script>
    function previewLogo() {
        const file = document.getElementById('logo').files[0];
        const reader = new FileReader();

        reader.onloadend = function() {
            localStorage.setItem('logo', reader.result);
            
            // Display the logo preview (optional)
            const logoImage = document.getElementById('logoImage');
            if (logoImage) {
                logoImage.src = reader.result;
                logoImage.style.display = 'block';
            }
        };

        if (file) {
            reader.readAsDataURL(file);
        }
    }
</script>

</body>
</html>
